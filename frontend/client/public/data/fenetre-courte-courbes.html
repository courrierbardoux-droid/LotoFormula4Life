<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <title>Fenêtre courte – Analyse EuroMillions</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
    h1 { font-size: 1.3rem; }
    h2 { font-size: 1.1rem; margin-top: 1.5rem; }
    .proposition { background: #e3f2fd; padding: 0.75rem 1rem; border-radius: 8px; margin: 1rem 0; }
    .vulgarisation { background: #fff3e0; padding: 0.75rem 1rem; border-radius: 8px; margin: 1rem 0; font-size: 0.95rem; }
    .chart-container { position: relative; height: 280px; margin: 1rem 0; }
  </style>
</head>
<body>
  <h1>Fenêtre courte (Surreprésentation / fréquence récente)</h1>
  <p>σ(N), ρ(N), overlap Top-12 – du plus récent vers le passé (N plafonné pour rester « court »).</p>

  <div class="proposition">
    <strong>Proposition concrète</strong><br>Fenêtre courte (Surrepr. / fréquence récente) suggérée: 200 tirages
  </div>

  <div class="vulgarisation">
    <strong>En bref (Loto)</strong><br>
    On teste des fenêtres courtes (50, 60, … jusqu’à ~450 tirages). Pour chaque N, on regarde σ(N), ρ(N) et l’overlap Top-12.
    La « bonne taille courte » est le <b>plus petit</b> N à partir duquel le classement reste encore raisonnablement stable (ρ ≥ 0,90, overlap ≥ 70 % sur 2 pas).
    Fenêtre courte = récent, pour combiner avec la fenêtre longue (fréquence structurelle) et la tendance.
  </div>

  <h2>σ(N) – Dispersion des fréquences</h2>
  <div class="chart-container"><canvas id="chartSigma"></canvas></div>

  <h2>ρ(N) – Stabilité du classement (Spearman)</h2>
  <div class="chart-container"><canvas id="chartRho"></canvas></div>

  <h2>Overlap Top-12 (%)</h2>
  <div class="chart-container"><canvas id="chartOverlap"></canvas></div>

  <h2>Validation par glissement</h2>
  <p>Fenêtre de 200 tirages glissée sur l’historique : 7/34 fenêtres valides (21 %).</p>

  <script>
    const labels = [50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350,360,370,380,390,400,410,420,430,440,450];
    new Chart(document.getElementById('chartSigma'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'σ(N)', data: [2.272,2.449,2.771,2.821,2.828,3.353,3.572,3.516,3.561,3.914,3.929,3.94,4.186,4.176,4.176,4.382,4.665,4.762,4.841,4.927,5.056,5.056,5.004,5.437,5.303,5.553,5.838,5.848,6.102,6.299,6.337,6.4,6.615,6.832,6.971,6.782,6.806,6.832,6.642,6.639,6.693], borderColor: '#1976d2', fill: false }] },
      options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'N (nb tirages)' } } } }
    });
    new Chart(document.getElementById('chartRho'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'ρ(N)', data: [0.717,0.721,0.81,0.856,0.861,0.871,0.834,0.834,0.865,0.837,0.856,0.874,0.9,0.891,0.886,0.918,0.902,0.872,0.898,0.883,0.908,0.901,0.912,0.891,0.91,0.918,0.913,0.91,0.891,0.9,0.924,0.925,0.954,0.932,0.93,0.915,0.91,0.931,0.942,0.961,0.951], borderColor: '#2e7d32', fill: false }] },
      options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'N (nb tirages)' } }, y: { min: 0.7, max: 1 } } }
    });
    new Chart(document.getElementById('chartOverlap'), {
      type: 'line',
      data: { labels, datasets: [{ label: 'Overlap Top-K (%)', data: [66.7,66.7,75,83.3,75,75,75,83.3,83.3,83.3,75,75,83.3,83.3,75,91.7,83.3,75,75,66.7,66.7,83.3,83.3,75,75,83.3,91.7,83.3,83.3,91.7,83.3,83.3,83.3,75,83.3,75,75,75,75,83.3,75], borderColor: '#7b1fa2', fill: false }] },
      options: { responsive: true, maintainAspectRatio: false, scales: { x: { title: { display: true, text: 'N (nb tirages)' } }, y: { min: 0, max: 100 } } }
    });
  </script>
</body>
</html>